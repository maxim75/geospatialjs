{"version":3,"file":"dist/geospatialjs.min.js","sources":["dist/geospatialjs.js"],"names":["GeospatialJS","mod","BoundingBox","self","this","north","ko","observable","east","south","west","setFromLocations","locations","forEach","x","lat","lng","ISO7064Mod11_10Check","GeolocationCode","baseSequence","toBase","decimal","symbols","split","base","length","conversion","Math","floor","parseInt","fromBase","string","digits","number","multiplier","i","digit","indexOf","pad","Array","join","slice","parseCode","code","idWithCheckDigit","replace","id","checkDigit","computeCheck","getCode","plat","plng","parseFloat","isNaN","latInt","lngInt","findCodes","found","reg","matches","exec","push","encode","str","verify","t","c","charCodeAt","f","getCheckDigit","val","getData","substring","TrackPoint","xmlNode","index","segment","getAttribute","getNearbyPoint","targetIndex","points","distance","point","toRad","value","PI","R","dLat","dLon","lat1","lat2","a","sin","cos","atan2","sqrt","d","speed","pointCount","time","unix","j","bearing","lon1","lon2","y","toBrng","eleNodes","getElementsByTagName","ele","textContent","timeNodes","moment","TrackSegment","track","trackpoints","pointIndex","_","map","startTime","min","endTime","max","GpxTrack","trackXml","getClosestPoint","timestamp","findSegmentByTimestamp","getClosestPointResursive","startIdx","endIdx","rec","idx","maxDelta","delta","abs","segments","find","LatLng","data","display","ew","ns","format","formatNum","toDms","deg","md","m","sd","toJS","toDmsFormat","dms","toFixed","displayDms","computed","glatlng","displayDec","latlng","distanceDisplay","dist","gridId","round","geolocatorLink","mapLink","lang","NS","EW","geohackLink","geocodeLink","formatString","args","arguments","match","precision","options","defaultOptions","thousandSeparator","decimalSeparator","opt","$","extend"],"mappings":"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"}