{"version":3,"file":"dist/geospatialjs.min.js","sources":["dist/geospatialjs.js"],"names":["GeospatialJS","mod","BoundingBox","self","this","north","ko","observable","east","south","west","setFromLocations","locations","forEach","x","lat","lng","ISO7064Mod11_10Check","GeolocationCode","baseSequence","toBase","decimal","symbols","split","base","length","conversion","Math","floor","parseInt","fromBase","string","digits","number","multiplier","i","digit","indexOf","pad","Array","join","slice","parseCode","code","idWithCheckDigit","replace","id","checkDigit","computeCheck","getCode","plat","plng","parseFloat","isNaN","latInt","lngInt","findCodes","found","reg","matches","exec","push","encode","str","verify","t","c","charCodeAt","f","getCheckDigit","val","getData","substring","GpxTracks","TrackPoint","xmlNode","index","segment","getAttribute","getNearbyPoint","targetIndex","points","distance","point","toRad","value","PI","R","dLat","dLon","lat1","lat2","a","sin","cos","atan2","sqrt","d","speed","pointCount","time","unix","j","bearing","lon1","lon2","y","toBrng","eleNodes","getElementsByTagName","ele","textContent","timeNodes","moment","TrackSegment","track","trackpoints","pointIndex","_","map","startTime","min","endTime","max","GpxTrack","trackXml","getClosestPoint","timestamp","findSegmentByTimestamp","getClosestPointResursive","startIdx","endIdx","rec","idx","maxDelta","delta","abs","segments","find","LatLng","data","display","ew","ns","format","formatNum","toDms","deg","md","m","sd","toJS","toDmsFormat","dms","toFixed","displayDms","computed","glatlng","displayDec","latlng","distanceDisplay","dist","gridId","round","geolocatorLink","mapLink","lang","NS","EW","geohackLink","geocodeLink","formatString","args","arguments","match","precision","options","defaultOptions","thousandSeparator","decimalSeparator","opt","$","extend"],"mappings":"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"}