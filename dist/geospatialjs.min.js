// GeospatialJS

var GeospatialJS=GeospatialJS||{};GeospatialJS.LatLng=function(a){var b=this;if(a instanceof Array){if(2!=a.length)throw"Array with two elements expected";if("number"!=typeof a[0]||"number"!=typeof a[1])throw"Float values expected";b.lat=ko.observable(a[0]),b.lng=ko.observable(a[1])}else if(a&&a.lat&&a.lng){if("number"!=typeof a.lat||"number"!=typeof a.lng)throw"Float values expected";b.lat=ko.observable(a.lat),b.lng=ko.observable(a.lng)}else b.lat=ko.observable(0),b.lng=ko.observable(0);b.display=function(){var a=b.lng()<0?"W":"E",c=b.lat()<0?"S":"N";return GeospatialJS.format(c,Math.abs(GeospatialJS.formatNum(b.lat(),4)))+" "+GeospatialJS.format(a,Math.abs(GeospatialJS.formatNum(b.lng(),4)))},b.distance=function(a){var b=function(a){return a*Math.PI/180};if(!(a instanceof lbank.model.LatLng))throw"lbank.model.LatLng object expected";var c=6371,d=b(a.lat()-this.lat()),e=b(a.lng()-this.lng()),f=b(this.lat()),g=b(a.lat()),h=Math.sin(d/2)*Math.sin(d/2)+Math.sin(e/2)*Math.sin(e/2)*Math.cos(f)*Math.cos(g),i=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),j=c*i;return j},b.toDms=function(a){return d=parseInt(a,10),md=60*Math.abs(a-d),m=parseInt(md,10),sd=60*(md-m),[d,m,sd]},b.toJS=function(){return{lat:b.lat(),lng:b.lng()}},b.toDmsFormat=function(a){var c=b.toDms(a);return GeospatialJS.format("{0}° {1}′ {2}″",Math.abs(c[0]),c[1],c[2].toFixed(2))},b.displayDms=ko.computed(function(a){var c=b.lng()<0?"W":"E",d=b.lat()<0?"S":"N";return GeospatialJS.format(d,b.toDmsFormat(b.lat()))+" "+GeospatialJS.format(c,b.toDmsFormat(b.lng()))}),b.displayDec=ko.computed(function(a){return b.display()}),b.latlng=ko.computed(function(){return{lat:b.lat(),lng:b.lng()}}),b.str=function(a){return""+b.lat()+","+b.lng()},b.distanceDisplay=function(a){var b=this.distance(a);return b>=1?GeospatialJS.format("{0} {1}",GeospatialJS.formatNum(b,1),"km"):GeospatialJS.format("{0} {1}",GeospatialJS.formatNum(1e3*b),"m")},b.gridId=function(){return Math.round(1e5*(9e3+Math.floor(100*b.lat()))+18e3+Math.floor(100*b.lng()))},b.geolocatorLink=function(){return GeospatialJS.format("http://tools.freeside.sk/geolocator/geolocator.html?q={0},{1}",b.lat(),b.lng())},b.mapLink=function(a){return GeospatialJS.format("/map/{0},{1}/15/{2}",(""+b.lat()).replace(",","."),(""+b.lng()).replace(",","."),a?a:"en")},b.NS=function(){return b.lat()>=0?"N":"S"},b.EW=function(){return b.lng()>=0?"E":"W"},b.geohackLink=function(){return GeospatialJS.format("http://toolserver.org/~geohack/geohack.php?params={0}_{1}_{2}_{3}",Math.abs(b.lat()),b.NS(),Math.abs(b.lng()),b.EW())}};var GeospatialJS=GeospatialJS||{};GeospatialJS.format=function(a){var b=arguments;return a.replace(/{(\d+)}/g,function(a,c){var d=parseInt(c,10)+1;return"undefined"!=typeof b[d]?b[d]:a})},GeospatialJS.formatNum=function(a,b,c){var d={thousandSeparator:",",decimalSeparator:"."},e=$.extend({},d,c),f="";return b&&b>0&&(f=e.decimalSeparator+a.toFixed(b).slice(-b)),a.toFixed(2).slice(0,-3).replace(/(?=(?!^)(?:\d{3})+(?!\d))/g,e.thousandSeparator)+f};var testFunc=function(){return 100};
//# sourceMappingURL=dist/geospatialjs.min.js.map